{"ast":null,"code":"// LocalStorage utilities for saving drafts\n\nconst STORAGE_KEY = 'verified-editor-drafts';\nconst CURRENT_DRAFT_KEY = 'verified-editor-current-draft';\nexport const saveDraft = draft => {\n  try {\n    const drafts = getAllDrafts();\n    const existingIndex = drafts.findIndex(d => d.id === draft.id);\n    const draftToSave = {\n      ...draft,\n      updatedAt: Date.now()\n    };\n    if (existingIndex >= 0) {\n      drafts[existingIndex] = draftToSave;\n    } else {\n      drafts.push(draftToSave);\n    }\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(drafts));\n    localStorage.setItem(CURRENT_DRAFT_KEY, draft.id);\n    return true;\n  } catch (error) {\n    console.error('Failed to save draft:', error);\n    return false;\n  }\n};\nexport const getAllDrafts = () => {\n  try {\n    const draftsJson = localStorage.getItem(STORAGE_KEY);\n    return draftsJson ? JSON.parse(draftsJson) : [];\n  } catch (error) {\n    console.error('Failed to get drafts:', error);\n    return [];\n  }\n};\nexport const getDraft = id => {\n  const drafts = getAllDrafts();\n  return drafts.find(d => d.id === id);\n};\nexport const getCurrentDraftId = () => {\n  return localStorage.getItem(CURRENT_DRAFT_KEY);\n};\nexport const deleteDraft = id => {\n  try {\n    const drafts = getAllDrafts();\n    const filtered = drafts.filter(d => d.id !== id);\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(filtered));\n    if (getCurrentDraftId() === id) {\n      localStorage.removeItem(CURRENT_DRAFT_KEY);\n    }\n    return true;\n  } catch (error) {\n    console.error('Failed to delete draft:', error);\n    return false;\n  }\n};\nexport const createNewDraft = () => {\n  return {\n    id: 'draft_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),\n    title: 'Untitled Document',\n    content: '',\n    pasteEvents: [],\n    createdAt: Date.now(),\n    updatedAt: Date.now()\n  };\n};\nexport const clearAllDrafts = () => {\n  try {\n    localStorage.removeItem(STORAGE_KEY);\n    localStorage.removeItem(CURRENT_DRAFT_KEY);\n    return true;\n  } catch (error) {\n    console.error('Failed to clear drafts:', error);\n    return false;\n  }\n};","map":{"version":3,"names":["STORAGE_KEY","CURRENT_DRAFT_KEY","saveDraft","draft","drafts","getAllDrafts","existingIndex","findIndex","d","id","draftToSave","updatedAt","Date","now","push","localStorage","setItem","JSON","stringify","error","console","draftsJson","getItem","parse","getDraft","find","getCurrentDraftId","deleteDraft","filtered","filter","removeItem","createNewDraft","Math","random","toString","substr","title","content","pasteEvents","createdAt","clearAllDrafts"],"sources":["/Users/van/Desktop/moc/frontend/src/utils/storage.js"],"sourcesContent":["// LocalStorage utilities for saving drafts\n\nconst STORAGE_KEY = 'verified-editor-drafts';\nconst CURRENT_DRAFT_KEY = 'verified-editor-current-draft';\n\nexport const saveDraft = (draft) => {\n  try {\n    const drafts = getAllDrafts();\n    const existingIndex = drafts.findIndex(d => d.id === draft.id);\n\n    const draftToSave = {\n      ...draft,\n      updatedAt: Date.now(),\n    };\n\n    if (existingIndex >= 0) {\n      drafts[existingIndex] = draftToSave;\n    } else {\n      drafts.push(draftToSave);\n    }\n\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(drafts));\n    localStorage.setItem(CURRENT_DRAFT_KEY, draft.id);\n\n    return true;\n  } catch (error) {\n    console.error('Failed to save draft:', error);\n    return false;\n  }\n};\n\nexport const getAllDrafts = () => {\n  try {\n    const draftsJson = localStorage.getItem(STORAGE_KEY);\n    return draftsJson ? JSON.parse(draftsJson) : [];\n  } catch (error) {\n    console.error('Failed to get drafts:', error);\n    return [];\n  }\n};\n\nexport const getDraft = (id) => {\n  const drafts = getAllDrafts();\n  return drafts.find(d => d.id === id);\n};\n\nexport const getCurrentDraftId = () => {\n  return localStorage.getItem(CURRENT_DRAFT_KEY);\n};\n\nexport const deleteDraft = (id) => {\n  try {\n    const drafts = getAllDrafts();\n    const filtered = drafts.filter(d => d.id !== id);\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(filtered));\n\n    if (getCurrentDraftId() === id) {\n      localStorage.removeItem(CURRENT_DRAFT_KEY);\n    }\n\n    return true;\n  } catch (error) {\n    console.error('Failed to delete draft:', error);\n    return false;\n  }\n};\n\nexport const createNewDraft = () => {\n  return {\n    id: 'draft_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),\n    title: 'Untitled Document',\n    content: '',\n    pasteEvents: [],\n    createdAt: Date.now(),\n    updatedAt: Date.now(),\n  };\n};\n\nexport const clearAllDrafts = () => {\n  try {\n    localStorage.removeItem(STORAGE_KEY);\n    localStorage.removeItem(CURRENT_DRAFT_KEY);\n    return true;\n  } catch (error) {\n    console.error('Failed to clear drafts:', error);\n    return false;\n  }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}