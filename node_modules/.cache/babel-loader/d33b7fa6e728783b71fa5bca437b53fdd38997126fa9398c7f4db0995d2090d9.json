{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useCallback, useRef } from 'react';\nexport const useKeystrokeTracking = () => {\n  _s();\n  const [keystrokes, setKeystrokes] = useState([]);\n  const [typingStats, setTypingStats] = useState({\n    totalKeystrokes: 0,\n    averageTypingSpeed: 0,\n    totalTimeSpent: 0,\n    pauseCount: 0,\n    backspaceCount: 0,\n    copyPasteDetected: false\n  });\n  const lastKeystrokeTime = useRef(0);\n  const startTime = useRef(Date.now());\n  const keydownTimes = useRef(new Map());\n  const trackKeyDown = useCallback(e => {\n    const now = Date.now();\n    const key = e.key;\n\n    // Detect copy-paste\n    if ((e.ctrlKey || e.metaKey) && (key === 'v' || key === 'c')) {\n      if (key === 'v') {\n        setTypingStats(prev => ({\n          ...prev,\n          copyPasteDetected: true\n        }));\n      }\n      return;\n    }\n\n    // Track pause (more than 2 seconds between keystrokes)\n    if (lastKeystrokeTime.current && now - lastKeystrokeTime.current > 2000) {\n      setTypingStats(prev => ({\n        ...prev,\n        pauseCount: prev.pauseCount + 1\n      }));\n    }\n    keydownTimes.current.set(key, now);\n    lastKeystrokeTime.current = now;\n    const keystroke = {\n      key,\n      timestamp: now,\n      type: 'keydown'\n    };\n    setKeystrokes(prev => [...prev, keystroke]);\n    setTypingStats(prev => ({\n      ...prev,\n      totalKeystrokes: prev.totalKeystrokes + 1,\n      backspaceCount: key === 'Backspace' ? prev.backspaceCount + 1 : prev.backspaceCount,\n      totalTimeSpent: Math.floor((now - startTime.current) / 1000)\n    }));\n  }, []);\n  const trackKeyUp = useCallback(e => {\n    const now = Date.now();\n    const key = e.key;\n    const keydownTime = keydownTimes.current.get(key);\n    if (keydownTime) {\n      const duration = now - keydownTime;\n      const keystroke = {\n        key,\n        timestamp: now,\n        type: 'keyup',\n        duration\n      };\n      setKeystrokes(prev => [...prev, keystroke]);\n      keydownTimes.current.delete(key);\n    }\n  }, []);\n  const calculateWPM = useCallback(() => {\n    if (keystrokes.length < 5) return 0;\n    const timeInMinutes = typingStats.totalTimeSpent / 60;\n    if (timeInMinutes === 0) return 0;\n\n    // Rough estimate: 5 keystrokes = 1 word\n    const words = typingStats.totalKeystrokes / 5;\n    return Math.round(words / timeInMinutes);\n  }, [keystrokes, typingStats]);\n  const resetTracking = useCallback(() => {\n    setKeystrokes([]);\n    setTypingStats({\n      totalKeystrokes: 0,\n      averageTypingSpeed: 0,\n      totalTimeSpent: 0,\n      pauseCount: 0,\n      backspaceCount: 0,\n      copyPasteDetected: false\n    });\n    startTime.current = Date.now();\n    lastKeystrokeTime.current = 0;\n    keydownTimes.current.clear();\n  }, []);\n  return {\n    keystrokes,\n    typingStats: {\n      ...typingStats,\n      averageTypingSpeed: calculateWPM()\n    },\n    trackKeyDown,\n    trackKeyUp,\n    resetTracking\n  };\n};\n_s(useKeystrokeTracking, \"XMq2GwgalrKcuQSZzw2blC9gf6s=\");","map":{"version":3,"names":["useState","useCallback","useRef","useKeystrokeTracking","_s","keystrokes","setKeystrokes","typingStats","setTypingStats","totalKeystrokes","averageTypingSpeed","totalTimeSpent","pauseCount","backspaceCount","copyPasteDetected","lastKeystrokeTime","startTime","Date","now","keydownTimes","Map","trackKeyDown","e","key","ctrlKey","metaKey","prev","current","set","keystroke","timestamp","type","Math","floor","trackKeyUp","keydownTime","get","duration","delete","calculateWPM","length","timeInMinutes","words","round","resetTracking","clear"],"sources":["/Users/van/Desktop/moc/frontend/src/hooks/useKeystrokeTracking.js"],"sourcesContent":["import { useState, useCallback, useRef } from 'react';\n\nexport const useKeystrokeTracking = () => {\n  const [keystrokes, setKeystrokes] = useState([]);\n  const [typingStats, setTypingStats] = useState({\n    totalKeystrokes: 0,\n    averageTypingSpeed: 0,\n    totalTimeSpent: 0,\n    pauseCount: 0,\n    backspaceCount: 0,\n    copyPasteDetected: false,\n  });\n\n  const lastKeystrokeTime = useRef(0);\n  const startTime = useRef(Date.now());\n  const keydownTimes = useRef(new Map());\n\n  const trackKeyDown = useCallback((e) => {\n    const now = Date.now();\n    const key = e.key;\n\n    // Detect copy-paste\n    if ((e.ctrlKey || e.metaKey) && (key === 'v' || key === 'c')) {\n      if (key === 'v') {\n        setTypingStats(prev => ({ ...prev, copyPasteDetected: true }));\n      }\n      return;\n    }\n\n    // Track pause (more than 2 seconds between keystrokes)\n    if (lastKeystrokeTime.current && now - lastKeystrokeTime.current > 2000) {\n      setTypingStats(prev => ({ ...prev, pauseCount: prev.pauseCount + 1 }));\n    }\n\n    keydownTimes.current.set(key, now);\n    lastKeystrokeTime.current = now;\n\n    const keystroke = {\n      key,\n      timestamp: now,\n      type: 'keydown',\n    };\n\n    setKeystrokes(prev => [...prev, keystroke]);\n\n    setTypingStats(prev => ({\n      ...prev,\n      totalKeystrokes: prev.totalKeystrokes + 1,\n      backspaceCount: key === 'Backspace' ? prev.backspaceCount + 1 : prev.backspaceCount,\n      totalTimeSpent: Math.floor((now - startTime.current) / 1000),\n    }));\n  }, []);\n\n  const trackKeyUp = useCallback((e) => {\n    const now = Date.now();\n    const key = e.key;\n    const keydownTime = keydownTimes.current.get(key);\n\n    if (keydownTime) {\n      const duration = now - keydownTime;\n      const keystroke = {\n        key,\n        timestamp: now,\n        type: 'keyup',\n        duration,\n      };\n\n      setKeystrokes(prev => [...prev, keystroke]);\n      keydownTimes.current.delete(key);\n    }\n  }, []);\n\n  const calculateWPM = useCallback(() => {\n    if (keystrokes.length < 5) return 0;\n\n    const timeInMinutes = typingStats.totalTimeSpent / 60;\n    if (timeInMinutes === 0) return 0;\n\n    // Rough estimate: 5 keystrokes = 1 word\n    const words = typingStats.totalKeystrokes / 5;\n    return Math.round(words / timeInMinutes);\n  }, [keystrokes, typingStats]);\n\n  const resetTracking = useCallback(() => {\n    setKeystrokes([]);\n    setTypingStats({\n      totalKeystrokes: 0,\n      averageTypingSpeed: 0,\n      totalTimeSpent: 0,\n      pauseCount: 0,\n      backspaceCount: 0,\n      copyPasteDetected: false,\n    });\n    startTime.current = Date.now();\n    lastKeystrokeTime.current = 0;\n    keydownTimes.current.clear();\n  }, []);\n\n  return {\n    keystrokes,\n    typingStats: {\n      ...typingStats,\n      averageTypingSpeed: calculateWPM(),\n    },\n    trackKeyDown,\n    trackKeyUp,\n    resetTracking,\n  };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}