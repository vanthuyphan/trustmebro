{"ast":null,"code":"import jsPDF from 'jspdf';\nexport const generatePDF = (content, options = {}) => {\n  const {\n    title = 'Document',\n    includeMetadata = false,\n    metadata = {}\n  } = options;\n  const doc = new jsPDF({\n    orientation: 'portrait',\n    unit: 'mm',\n    format: 'a4'\n  });\n\n  // Page settings\n  const pageWidth = doc.internal.pageSize.getWidth();\n  const pageHeight = doc.internal.pageSize.getHeight();\n  const margin = 20;\n  const maxWidth = pageWidth - margin * 2;\n  let yPosition = margin;\n\n  // Helper function to add new page if needed\n  const checkPageBreak = lineHeight => {\n    if (yPosition + lineHeight > pageHeight - margin) {\n      doc.addPage();\n      yPosition = margin;\n      return true;\n    }\n    return false;\n  };\n\n  // Add title\n  doc.setFontSize(20);\n  doc.setFont('helvetica', 'bold');\n  doc.text(title, margin, yPosition);\n  yPosition += 15;\n\n  // Add metadata if requested\n  if (includeMetadata && metadata) {\n    doc.setFontSize(9);\n    doc.setFont('helvetica', 'normal');\n    doc.setTextColor(100, 100, 100);\n    if (metadata.certificateId) {\n      doc.text(`Certificate ID: ${metadata.certificateId}`, margin, yPosition);\n      yPosition += 5;\n    }\n    if (metadata.createdAt) {\n      doc.text(`Created: ${metadata.createdAt}`, margin, yPosition);\n      yPosition += 5;\n    }\n    if (metadata.wordCount) {\n      doc.text(`Words: ${metadata.wordCount} | Characters: ${metadata.charCount || 0}`, margin, yPosition);\n      yPosition += 5;\n    }\n\n    // Add verification section\n    if (metadata.verified) {\n      yPosition += 3;\n      doc.setFillColor(230, 255, 230);\n      doc.rect(margin, yPosition, maxWidth, 25, 'F');\n      yPosition += 5;\n      doc.setFontSize(10);\n      doc.setFont('helvetica', 'bold');\n      doc.setTextColor(0, 135, 90);\n      doc.text('✓ Verified Document', margin + 3, yPosition);\n      yPosition += 5;\n      doc.setFontSize(8);\n      doc.setFont('helvetica', 'normal');\n      doc.setTextColor(60, 60, 60);\n      if (metadata.typingSpeed) {\n        doc.text(`Typing Speed: ${metadata.typingSpeed} WPM`, margin + 3, yPosition);\n        yPosition += 4;\n      }\n      if (metadata.timeSpent) {\n        doc.text(`Time Spent: ${metadata.timeSpent}`, margin + 3, yPosition);\n        yPosition += 4;\n      }\n      if (metadata.copyPasteDetected !== undefined) {\n        doc.text(`Copy/Paste: ${metadata.copyPasteDetected ? 'Detected ⚠' : 'None ✓'}`, margin + 3, yPosition);\n        yPosition += 4;\n      }\n      yPosition += 3;\n    }\n    yPosition += 10;\n    doc.setDrawColor(200, 200, 200);\n    doc.line(margin, yPosition, pageWidth - margin, yPosition);\n    yPosition += 10;\n  }\n\n  // Reset text color and font for content\n  doc.setTextColor(0, 0, 0);\n  doc.setFontSize(11);\n  doc.setFont('helvetica', 'normal');\n\n  // Remove HTML tags if present (for rich text content)\n  const cleanContent = content.replace(/<[^>]*>/g, '') // Remove HTML tags\n  .replace(/&nbsp;/g, ' ').replace(/&amp;/g, '&').replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '\"');\n\n  // Split content into lines and add to PDF\n  const lines = doc.splitTextToSize(cleanContent, maxWidth);\n  const lineHeight = 7;\n  lines.forEach(line => {\n    checkPageBreak(lineHeight);\n    doc.text(line, margin, yPosition);\n    yPosition += lineHeight;\n  });\n\n  // Add footer on last page\n  const totalPages = doc.internal.pages.length - 1;\n  for (let i = 1; i <= totalPages; i++) {\n    doc.setPage(i);\n    doc.setFontSize(8);\n    doc.setTextColor(150, 150, 150);\n    doc.text(`Page ${i} of ${totalPages}`, pageWidth / 2, pageHeight - 10, {\n      align: 'center'\n    });\n  }\n  return doc;\n};\nexport const downloadPDF = (content, filename, options = {}) => {\n  const doc = generatePDF(content, options);\n  doc.save(filename);\n};","map":{"version":3,"names":["jsPDF","generatePDF","content","options","title","includeMetadata","metadata","doc","orientation","unit","format","pageWidth","internal","pageSize","getWidth","pageHeight","getHeight","margin","maxWidth","yPosition","checkPageBreak","lineHeight","addPage","setFontSize","setFont","text","setTextColor","certificateId","createdAt","wordCount","charCount","verified","setFillColor","rect","typingSpeed","timeSpent","copyPasteDetected","undefined","setDrawColor","line","cleanContent","replace","lines","splitTextToSize","forEach","totalPages","pages","length","i","setPage","align","downloadPDF","filename","save"],"sources":["/Users/van/Desktop/moc/frontend/src/utils/pdfGenerator.js"],"sourcesContent":["import jsPDF from 'jspdf';\n\nexport const generatePDF = (content, options = {}) => {\n  const {\n    title = 'Document',\n    includeMetadata = false,\n    metadata = {},\n  } = options;\n\n  const doc = new jsPDF({\n    orientation: 'portrait',\n    unit: 'mm',\n    format: 'a4',\n  });\n\n  // Page settings\n  const pageWidth = doc.internal.pageSize.getWidth();\n  const pageHeight = doc.internal.pageSize.getHeight();\n  const margin = 20;\n  const maxWidth = pageWidth - (margin * 2);\n  let yPosition = margin;\n\n  // Helper function to add new page if needed\n  const checkPageBreak = (lineHeight) => {\n    if (yPosition + lineHeight > pageHeight - margin) {\n      doc.addPage();\n      yPosition = margin;\n      return true;\n    }\n    return false;\n  };\n\n  // Add title\n  doc.setFontSize(20);\n  doc.setFont('helvetica', 'bold');\n  doc.text(title, margin, yPosition);\n  yPosition += 15;\n\n  // Add metadata if requested\n  if (includeMetadata && metadata) {\n    doc.setFontSize(9);\n    doc.setFont('helvetica', 'normal');\n    doc.setTextColor(100, 100, 100);\n\n    if (metadata.certificateId) {\n      doc.text(`Certificate ID: ${metadata.certificateId}`, margin, yPosition);\n      yPosition += 5;\n    }\n\n    if (metadata.createdAt) {\n      doc.text(`Created: ${metadata.createdAt}`, margin, yPosition);\n      yPosition += 5;\n    }\n\n    if (metadata.wordCount) {\n      doc.text(`Words: ${metadata.wordCount} | Characters: ${metadata.charCount || 0}`, margin, yPosition);\n      yPosition += 5;\n    }\n\n    // Add verification section\n    if (metadata.verified) {\n      yPosition += 3;\n      doc.setFillColor(230, 255, 230);\n      doc.rect(margin, yPosition, maxWidth, 25, 'F');\n\n      yPosition += 5;\n      doc.setFontSize(10);\n      doc.setFont('helvetica', 'bold');\n      doc.setTextColor(0, 135, 90);\n      doc.text('✓ Verified Document', margin + 3, yPosition);\n      yPosition += 5;\n\n      doc.setFontSize(8);\n      doc.setFont('helvetica', 'normal');\n      doc.setTextColor(60, 60, 60);\n\n      if (metadata.typingSpeed) {\n        doc.text(`Typing Speed: ${metadata.typingSpeed} WPM`, margin + 3, yPosition);\n        yPosition += 4;\n      }\n      if (metadata.timeSpent) {\n        doc.text(`Time Spent: ${metadata.timeSpent}`, margin + 3, yPosition);\n        yPosition += 4;\n      }\n      if (metadata.copyPasteDetected !== undefined) {\n        doc.text(`Copy/Paste: ${metadata.copyPasteDetected ? 'Detected ⚠' : 'None ✓'}`, margin + 3, yPosition);\n        yPosition += 4;\n      }\n      yPosition += 3;\n    }\n\n    yPosition += 10;\n    doc.setDrawColor(200, 200, 200);\n    doc.line(margin, yPosition, pageWidth - margin, yPosition);\n    yPosition += 10;\n  }\n\n  // Reset text color and font for content\n  doc.setTextColor(0, 0, 0);\n  doc.setFontSize(11);\n  doc.setFont('helvetica', 'normal');\n\n  // Remove HTML tags if present (for rich text content)\n  const cleanContent = content\n    .replace(/<[^>]*>/g, '') // Remove HTML tags\n    .replace(/&nbsp;/g, ' ')\n    .replace(/&amp;/g, '&')\n    .replace(/&lt;/g, '<')\n    .replace(/&gt;/g, '>')\n    .replace(/&quot;/g, '\"');\n\n  // Split content into lines and add to PDF\n  const lines = doc.splitTextToSize(cleanContent, maxWidth);\n  const lineHeight = 7;\n\n  lines.forEach((line) => {\n    checkPageBreak(lineHeight);\n    doc.text(line, margin, yPosition);\n    yPosition += lineHeight;\n  });\n\n  // Add footer on last page\n  const totalPages = doc.internal.pages.length - 1;\n  for (let i = 1; i <= totalPages; i++) {\n    doc.setPage(i);\n    doc.setFontSize(8);\n    doc.setTextColor(150, 150, 150);\n    doc.text(\n      `Page ${i} of ${totalPages}`,\n      pageWidth / 2,\n      pageHeight - 10,\n      { align: 'center' }\n    );\n  }\n\n  return doc;\n};\n\nexport const downloadPDF = (content, filename, options = {}) => {\n  const doc = generatePDF(content, options);\n  doc.save(filename);\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}